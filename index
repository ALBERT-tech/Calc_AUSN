<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —á–∏—Å—Ç–æ–π –ø—Ä–∏–±—ã–ª–∏ (–ê–£–°–ù 20%) ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f0f4f8;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }
        .calculator {
            max-width: 700px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
        }
        h1 {
            margin-top: 0;
            color: #1e3c5c;
            font-size: 1.8rem;
            border-bottom: 3px solid #2b6f9b;
            padding-bottom: 10px;
        }
        h2 {
            font-size: 1.3rem;
            color: #2c3e50;
            margin: 20px 0 10px;
        }
        .input-group {
            margin-bottom: 20px;
        }
        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        .input-group input[type="number"] {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #d0ddee;
            border-radius: 10px;
            font-size: 16px;
            transition: border 0.2s;
        }
        .input-group input[type="number"]:focus {
            border-color: #2b6f9b;
            outline: none;
        }
        .expense-row {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            background: #f9fcff;
            padding: 10px 15px;
            border-radius: 12px;
        }
        .expense-row > * {
            flex: 1 1 auto;
        }
        .expense-row .label {
            min-width: 140px;
            font-weight: 600;
            color: #1e3c5c;
        }
        .expense-row input[type="number"] {
            width: 160px;
            padding: 8px 12px;
            border: 2px solid #d0ddee;
            border-radius: 8px;
            font-size: 15px;
        }
        .radio-group {
            display: flex;
            gap: 15px;
            align-items: center;
            background: #eef3f9;
            padding: 5px 12px;
            border-radius: 25px;
        }
        .radio-group label {
            display: flex;
            align-items: center;
            gap: 4px;
            font-weight: 500;
            cursor: pointer;
        }
        .radio-group input[type="radio"] {
            margin: 0;
            cursor: pointer;
        }
        .credit-block {
            background: #eaf2f9;
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
        }
        .credit-row {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
            align-items: flex-end;
        }
        .credit-field {
            flex: 1 1 180px;
        }
        .credit-field label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
            color: #1e3c5c;
        }
        .credit-field input {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid #b8cee4;
            border-radius: 8px;
        }
        .interest-display {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            background: white;
            padding: 12px 18px;
            border-radius: 40px;
            border: 1px solid #b8cee4;
        }
        .interest-amount {
            font-weight: 700;
            font-size: 1.2rem;
            color: #1e3c5c;
            background: #d4e3f0;
            padding: 5px 15px;
            border-radius: 30px;
        }
        .button {
            background: #2b6f9b;
            color: white;
            border: none;
            padding: 16px 30px;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            width: 100%;
            margin: 25px 0 15px;
            transition: background 0.2s;
        }
        .button:hover {
            background: #1e4f73;
        }
        .results {
            background: #e6f0fa;
            border-radius: 20px;
            padding: 20px 25px;
        }
        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #b0c9de;
            font-size: 1.2rem;
        }
        .result-item:last-child {
            border-bottom: none;
        }
        .result-label {
            font-weight: 600;
            color: #1e3c5c;
        }
        .result-value {
            font-family: 'Courier New', monospace;
            font-weight: 700;
        }
        .tax { color: #c44536; }
        .profit { color: #1e7640; }
        .note {
            background: #fcf4e8;
            padding: 15px;
            border-radius: 14px;
            font-size: 0.95rem;
            color: #6b4f32;
            margin-top: 20px;
        }
    </style>
</head>
<body>
<div class="calculator">
    <h1>üßÆ –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å (–ê–£–°–ù 20%) ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ä–∞—Å—á—ë—Ç</h1>

    <!-- –î–æ—Ö–æ–¥ -->
    <div class="input-group">
        <label>üí∞ –°—É–º–º–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (–¥–æ—Ö–æ–¥), ‚ÇΩ</label>
        <input type="number" id="contract" step="0.01" min="0" value="0" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 1 500 000">
    </div>

    <h2>üì¶ –†–∞—Å—Ö–æ–¥—ã (—É–∫–∞–∂–∏—Ç–µ —Ñ–æ—Ä–º—É –æ–ø–ª–∞—Ç—ã)</h2>

    <!-- –ó–∞–∫—É–ø -->
    <div class="expense-row">
        <span class="label">–ó–∞–∫—É–ø —Ç–æ–≤–∞—Ä–∞</span>
        <input type="number" id="zakup" step="0.01" min="0" value="0" placeholder="0.00">
        <div class="radio-group">
            <label><input type="radio" name="type_zakup" value="cashless" checked> –ë–µ–∑–Ω–∞–ª</label>
            <label><input type="radio" name="type_zakup" value="cash"> –ù–∞–ª–∏—á–Ω—ã–µ</label>
        </div>
    </div>

    <!-- –õ–æ–≥–∏—Å—Ç–∏–∫–∞ -->
    <div class="expense-row">
        <span class="label">–õ–æ–≥–∏—Å—Ç–∏–∫–∞</span>
        <input type="number" id="logist" step="0.01" min="0" value="0" placeholder="0.00">
        <div class="radio-group">
            <label><input type="radio" name="type_logist" value="cashless" checked> –ë–µ–∑–Ω–∞–ª</label>
            <label><input type="radio" name="type_logist" value="cash"> –ù–∞–ª–∏—á–Ω—ã–µ</label>
        </div>
    </div>

    <!-- –ö–æ–º–∏—Å—Å–∏—è –ø–ª–æ—â–∞–¥–∫–∏ -->
    <div class="expense-row">
        <span class="label">–ö–æ–º–∏—Å—Å–∏—è –ø–ª–æ—â–∞–¥–∫–∏</span>
        <input type="number" id="commission" step="0.01" min="0" value="0" placeholder="0.00">
        <div class="radio-group">
            <label><input type="radio" name="type_commission" value="cashless" checked> –ë–µ–∑–Ω–∞–ª</label>
            <label><input type="radio" name="type_commission" value="cash"> –ù–∞–ª–∏—á–Ω—ã–µ</label>
        </div>
    </div>

    <!-- –ú–æ–Ω—Ç–∞–∂ -->
    <div class="expense-row">
        <span class="label">–ú–æ–Ω—Ç–∞–∂</span>
        <input type="number" id="montage" step="0.01" min="0" value="0" placeholder="0.00">
        <div class="radio-group">
            <label><input type="radio" name="type_montage" value="cashless" checked> –ë–µ–∑–Ω–∞–ª</label>
            <label><input type="radio" name="type_montage" value="cash"> –ù–∞–ª–∏—á–Ω—ã–µ</label>
        </div>
    </div>

    <h2>üè¶ –ö—Ä–µ–¥–∏—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h2>
    <div class="credit-block">
        <div class="credit-row">
            <div class="credit-field">
                <label>–°—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–∞, ‚ÇΩ</label>
                <input type="number" id="creditAmount" step="0.01" min="0" value="0" placeholder="0.00">
            </div>
            <div class="credit-field">
                <label>–î–ª–∏–Ω–∞ —Å–¥–µ–ª–∫–∏ (–¥–Ω–µ–π)</label>
                <input type="number" id="dealDays" step="1" min="0" value="0" placeholder="30">
            </div>
            <div class="credit-field">
                <label>–ü—Ä–æ—Ü–µ–Ω—Ç –≥–æ–¥–æ–≤—ã—Ö, %</label>
                <input type="number" id="creditRate" step="0.1" min="0" value="0" placeholder="15">
            </div>
        </div>

        <!-- –ü—Ä–æ—Ü–µ–Ω—Ç—ã (–≤—ã—á–∏—Å–ª—è—é—Ç—Å—è) + –≤—ã–±–æ—Ä —Ñ–æ—Ä–º—ã –æ–ø–ª–∞—Ç—ã -->
        <div class="interest-display">
            <span style="font-weight:600;">üí∏ –ü—Ä–æ—Ü–µ–Ω—Ç—ã –∑–∞ –∫—Ä–µ–¥–∏—Ç:</span>
            <span class="interest-amount" id="interestValue">0.00 ‚ÇΩ</span>
            <div class="radio-group" style="margin-left: auto;">
                <label><input type="radio" name="type_interest" value="cashless" checked> –ë–µ–∑–Ω–∞–ª</label>
                <label><input type="radio" name="type_interest" value="cash"> –ù–∞–ª–∏—á–Ω—ã–µ</label>
            </div>
        </div>
        <div style="font-size:0.9rem; color:#2b4f6e; margin-top:8px;">
            * –ø—Ä–æ—Ü–µ–Ω—Ç—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: —Å—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–∞ √ó (–¥–Ω–µ–π/365) √ó (—Å—Ç–∞–≤–∫–∞/100)
        </div>
    </div>

    <button class="button" onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø—Ä–∏–±—ã–ª—å</button>

    <div class="results" id="results">
        <div class="result-item">
            <span class="result-label">üí∞ –ù–∞–ª–æ–≥ (20% –æ—Ç –¥–æ—Ö–æ–¥–∞ ‚àí –±–µ–∑–Ω–∞–ª. —Ä–∞—Å—Ö–æ–¥—ã):</span>
            <span class="result-value tax" id="taxResult">0.00 ‚ÇΩ</span>
        </div>
        <div class="result-item">
            <span class="result-label">üìä –ë—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∞—è –ø—Ä–∏–±—ã–ª—å (–±–µ–∑ —É—á—ë—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã—Ö):</span>
            <span class="result-value" id="accountingResult">0.00 ‚ÇΩ</span>
        </div>
        <div class="result-item">
            <span class="result-label">üíé –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å (—Å —É—á—ë—Ç–æ–º –≤—Å–µ—Ö —Ç—Ä–∞—Ç):</span>
            <span class="result-value profit" id="netResult">0.00 ‚ÇΩ</span>
        </div>
    </div>

    <div class="note">
        ‚ö° <strong>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</strong><br>
        ‚Ä¢ –í –¥–æ—Ö–æ–¥—ã –∏–¥—ë—Ç —Å—É–º–º–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.<br>
        ‚Ä¢ –†–∞—Å—Ö–æ–¥—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ –±–µ–∑–Ω–∞–ª–∏—á–Ω—ã–µ (—É–º–µ–Ω—å—à–∞—é—Ç –Ω–∞–ª–æ–≥) –∏ –Ω–∞–ª–∏—á–Ω—ã–µ (–Ω–µ —É–º–µ–Ω—å—à–∞—é—Ç).<br>
        ‚Ä¢ –ü—Ä–æ—Ü–µ–Ω—Ç—ã –ø–æ –∫—Ä–µ–¥–∏—Ç—É —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∑–∞ –ø–µ—Ä–∏–æ–¥ —Å–¥–µ–ª–∫–∏ –∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫ —Ä–∞—Å—Ö–æ–¥–∞–º —Å–æ–≥–ª–∞—Å–Ω–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ñ–æ—Ä–º–µ –æ–ø–ª–∞—Ç—ã.<br>
        ‚Ä¢ –ù–∞–ª–æ–≥ = 20% √ó max(0, –¥–æ—Ö–æ–¥ ‚àí –±–µ–∑–Ω–∞–ª–∏—á–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (–≤–∫–ª—é—á–∞—è –ø—Ä–æ—Ü–µ–Ω—Ç—ã, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ ¬´–±–µ–∑–Ω–∞–ª¬ª)).<br>
        ‚Ä¢ –ë—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∞—è –ø—Ä–∏–±—ã–ª—å –±–µ–∑ —É—á—ë—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã—Ö = –¥–æ—Ö–æ–¥ ‚àí –±–µ–∑–Ω–∞–ª–∏—á–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã ‚àí –Ω–∞–ª–æ–≥.<br>
        ‚Ä¢ –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å = –¥–æ—Ö–æ–¥ ‚àí –≤—Å–µ —Ä–∞—Å—Ö–æ–¥—ã (–±–µ–∑–Ω–∞–ª + –Ω–∞–ª + –ø—Ä–æ—Ü–µ–Ω—Ç—ã) ‚àí –Ω–∞–ª–æ–≥.
    </div>
</div>

<script>
    function calculate() {
        // ---- –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö ----
        const contract = parseFloat(document.getElementById('contract').value) || 0;

        // –†–∞—Å—Ö–æ–¥—ã —Å –≤—ã–±–æ—Ä–æ–º —Ñ–æ—Ä–º—ã
        const zakup = parseFloat(document.getElementById('zakup').value) || 0;
        const logist = parseFloat(document.getElementById('logist').value) || 0;
        const commission = parseFloat(document.getElementById('commission').value) || 0;
        const montage = parseFloat(document.getElementById('montage').value) || 0;

        // –¢–∏–ø—ã –æ–ø–ª–∞—Ç—ã –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤
        const typeZakup = document.querySelector('input[name="type_zakup"]:checked').value;
        const typeLogist = document.querySelector('input[name="type_logist"]:checked').value;
        const typeCommission = document.querySelector('input[name="type_commission"]:checked').value;
        const typeMontage = document.querySelector('input[name="type_montage"]:checked').value;

        // –ö—Ä–µ–¥–∏—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
        const credit = parseFloat(document.getElementById('creditAmount').value) || 0;
        const days = parseFloat(document.getElementById('dealDays').value) || 0;
        const rate = parseFloat(document.getElementById('creditRate').value) || 0;

        // –†–∞—Å—á—ë—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –ø–æ –∫—Ä–µ–¥–∏—Ç—É
        let interest = 0;
        if (credit > 0 && days > 0 && rate > 0) {
            interest = credit * (days / 365) * (rate / 100);
        }
        // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å—É–º–º—É –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ —Ä—è–¥–æ–º
        document.getElementById('interestValue').innerText = interest.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ' ‚ÇΩ';

        // –¢–∏–ø –æ–ø–ª–∞—Ç—ã –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
        const typeInterest = document.querySelector('input[name="type_interest"]:checked').value;

        // ---- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ –±–µ–∑–Ω–∞–ª –∏ –Ω–∞–ª ----
        let cashlessExpenses = 0; // –±–µ–∑–Ω–∞–ª–∏—á–Ω—ã–µ (—É–º–µ–Ω—å—à–∞—é—Ç –Ω–∞–ª–æ–≥)
        let cashExpenses = 0;     // –Ω–∞–ª–∏—á–Ω—ã–µ (–Ω–µ —É–º–µ–Ω—å—à–∞—é—Ç)

        // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞
        function addExpense(amount, type) {
            if (type === 'cashless') {
                cashlessExpenses += amount;
            } else {
                cashExpenses += amount;
            }
        }

        addExpense(zakup, typeZakup);
        addExpense(logist, typeLogist);
        addExpense(commission, typeCommission);
        addExpense(montage, typeMontage);
        addExpense(interest, typeInterest); // –ø—Ä–æ—Ü–µ–Ω—Ç—ã –¥–æ–±–∞–≤–ª—è–µ–º –∫–∞–∫ —Ä–∞—Å—Ö–æ–¥

        // ---- –†–∞—Å—á—ë—Ç –Ω–∞–ª–æ–≥–∞ ----
        const taxBase = contract - cashlessExpenses;
        const tax = taxBase > 0 ? taxBase * 0.2 : 0;

        // ---- –ü—Ä–∏–±—ã–ª—å ----
        const accountingProfit = contract - cashlessExpenses - tax;            // –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∞—è –±–µ–∑ —É—á—ë—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã—Ö
        const netProfit = contract - cashlessExpenses - cashExpenses - tax;    // —á–∏—Å—Ç–∞—è (–≤—Å–µ —Ç—Ä–∞—Ç—ã)

        // ---- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ ----
        const formatMoney = (value) => {
            return value.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ' ‚ÇΩ';
        };

        document.getElementById('taxResult').innerText = formatMoney(tax);
        document.getElementById('accountingResult').innerText = formatMoney(accountingProfit);
        document.getElementById('netResult').innerText = formatMoney(netProfit);
    }

    // –ü—Ä–∏–≤—è–∑–∞—Ç—å —Ä–∞—Å—á—ë—Ç –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é –ø–æ–ª–µ–π –∫—Ä–µ–¥–∏—Ç–∞, —á—Ç–æ–±—ã —Å—É–º–º–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –æ–±–Ω–æ–≤–ª—è–ª–∞—Å—å —Å—Ä–∞–∑—É
    document.getElementById('creditAmount').addEventListener('input', updateInterestPreview);
    document.getElementById('dealDays').addEventListener('input', updateInterestPreview);
    document.getElementById('creditRate').addEventListener('input', updateInterestPreview);

    function updateInterestPreview() {
        const credit = parseFloat(document.getElementById('creditAmount').value) || 0;
        const days = parseFloat(document.getElementById('dealDays').value) || 0;
        const rate = parseFloat(document.getElementById('creditRate').value) || 0;
        let interest = 0;
        if (credit > 0 && days > 0 && rate > 0) {
            interest = credit * (days / 365) * (rate / 100);
        }
        document.getElementById('interestValue').innerText = interest.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ' ‚ÇΩ';
    }

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.onload = function() {
        updateInterestPreview();
        calculate();
    };
</script>
</body>
</html>
